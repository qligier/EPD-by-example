<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The pages explain the transactions by using samples recorded or adapted from transactions performed during the annual Swiss projectathon (September 2020)."><meta name=author content="eHealth Suisse"><link href=https://ehealthsuisse.github.io/EPD-by-example/ProvideAndRegister/ rel=canonical><link href=../RetrieveDocumentSet/ rel=prev><link href=../AuthenticateUser/ rel=next><link rel=icon href=../media/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.14"><title>Provide and Register Document Set - EPD by example</title><link rel=stylesheet href=../assets/stylesheets/main.fad675c6.min.css><link rel=stylesheet href=../assets/stylesheets/palette.356b1318.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/timeago.css><link rel=stylesheet href=../media/ehealthsuisse.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=custom> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#provide-and-register-document-set class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=https://www.e-health-suisse.ch/ title="EPD by example" class="md-header__button md-logo" aria-label="EPD by example" data-md-component=logo> <img src=../media/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EPD by example </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Provide and Register Document Set </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://www.e-health-suisse.ch/ title="EPD by example" class="md-nav__button md-logo" aria-label="EPD by example" data-md-component=logo> <img src=../media/logo.svg alt=logo> </a> EPD by example </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Patient Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Patient Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../PDQ/ class=md-nav__link> <span class=md-ellipsis> Patient Demographics Query </span> </a> </li> <li class=md-nav__item> <a href=../PIXFeed/ class=md-nav__link> <span class=md-ellipsis> PIX Feed </span> </a> </li> <li class=md-nav__item> <a href=../PIXQuery/ class=md-nav__link> <span class=md-ellipsis> PIX Query </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Document Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Document Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../RegistryStoredQuery/ class=md-nav__link> <span class=md-ellipsis> Registry Stored Query </span> </a> </li> <li class=md-nav__item> <a href=../RetrieveDocumentSet/ class=md-nav__link> <span class=md-ellipsis> Retrieve Document Set </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Provide and Register Document Set </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Provide and Register Document Set </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#transaction class=md-nav__link> <span class=md-ellipsis> Transaction </span> </a> <nav class=md-nav aria-label=Transaction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#message-semantics class=md-nav__link> <span class=md-ellipsis> Message Semantics </span> </a> <nav class=md-nav aria-label="Message Semantics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#request-message class=md-nav__link> <span class=md-ellipsis> Request Message </span> </a> </li> <li class=md-nav__item> <a href=#message-interpretation class=md-nav__link> <span class=md-ellipsis> Message Interpretation </span> </a> <nav class=md-nav aria-label="Message Interpretation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#submission-set class=md-nav__link> <span class=md-ellipsis> Submission Set </span> </a> </li> <li class=md-nav__item> <a href=#document-metadata class=md-nav__link> <span class=md-ellipsis> Document Metadata </span> </a> </li> <li class=md-nav__item> <a href=#association class=md-nav__link> <span class=md-ellipsis> Association </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#response-message class=md-nav__link> <span class=md-ellipsis> Response Message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transport-protocol class=md-nav__link> <span class=md-ellipsis> Transport Protocol </span> </a> </li> <li class=md-nav__item> <a href=#audit-log class=md-nav__link> <span class=md-ellipsis> Audit Log </span> </a> </li> <li class=md-nav__item> <a href=#security-requirements class=md-nav__link> <span class=md-ellipsis> Security Requirements </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#test-opportunity class=md-nav__link> <span class=md-ellipsis> Test Opportunity </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Authentication </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Authentication </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../AuthenticateUser/ class=md-nav__link> <span class=md-ellipsis> Authenticate User </span> </a> </li> <li class=md-nav__item> <a href=../IdPRenew/ class=md-nav__link> <span class=md-ellipsis> IdP Renew </span> </a> </li> <li class=md-nav__item> <a href=../SSOLogout/ class=md-nav__link> <span class=md-ellipsis> SSO Logout </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Authorization </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Authorization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../GetXAssertion/ class=md-nav__link> <span class=md-ellipsis> Get X-User Assertion </span> </a> </li> <li class=md-nav__item> <a href=../ProvideXAssertion/ class=md-nav__link> <span class=md-ellipsis> Provide X-User Assertion </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Public Test Systems </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Public Test Systems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../playground/ class=md-nav__link> <span class=md-ellipsis> EPR Playground </span> </a> </li> <li class=md-nav__item> <a href=../gazelle/ class=md-nav__link> <span class=md-ellipsis> EPR Reference Environment </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Swiss EPR Exchange Formats </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Swiss EPR Exchange Formats </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../MedicationCardDocument/ class=md-nav__link> <span class=md-ellipsis> Medication Card document </span> </a> </li> <li class=md-nav__item> <a href=../ImmunizationAdministrationDocument/ class=md-nav__link> <span class=md-ellipsis> Immunization Administration Document </span> </a> </li> <li class=md-nav__item> <a href=../Questionnaire/ class=md-nav__link> <span class=md-ellipsis> How to build a FHIR-Questionnaire </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#transaction class=md-nav__link> <span class=md-ellipsis> Transaction </span> </a> <nav class=md-nav aria-label=Transaction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#message-semantics class=md-nav__link> <span class=md-ellipsis> Message Semantics </span> </a> <nav class=md-nav aria-label="Message Semantics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#request-message class=md-nav__link> <span class=md-ellipsis> Request Message </span> </a> </li> <li class=md-nav__item> <a href=#message-interpretation class=md-nav__link> <span class=md-ellipsis> Message Interpretation </span> </a> <nav class=md-nav aria-label="Message Interpretation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#submission-set class=md-nav__link> <span class=md-ellipsis> Submission Set </span> </a> </li> <li class=md-nav__item> <a href=#document-metadata class=md-nav__link> <span class=md-ellipsis> Document Metadata </span> </a> </li> <li class=md-nav__item> <a href=#association class=md-nav__link> <span class=md-ellipsis> Association </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#response-message class=md-nav__link> <span class=md-ellipsis> Response Message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transport-protocol class=md-nav__link> <span class=md-ellipsis> Transport Protocol </span> </a> </li> <li class=md-nav__item> <a href=#audit-log class=md-nav__link> <span class=md-ellipsis> Audit Log </span> </a> </li> <li class=md-nav__item> <a href=#security-requirements class=md-nav__link> <span class=md-ellipsis> Security Requirements </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#test-opportunity class=md-nav__link> <span class=md-ellipsis> Test Opportunity </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=provide-and-register-document-set>Provide and Register Document Set<a class=headerlink href=#provide-and-register-document-set title="Permanent link"> ¶</a></h1> <p>Transaction to store one or more documents to a community. Primary systems shall use this transaction to export documents and the to a community repository to add it to a patients <abbr title="Electronic Patient Record">EPR</abbr>. </p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link"> ¶</a></h2> <p>Primary systems shall use this transaction to provide documents and the related document metadata to a patient <abbr title="Electronic Patient Record">EPR</abbr>. In the Swiss <abbr title="Electronic Patient Record">EPR</abbr> the <a href=https://profiles.ihe.net/ITI/TF/Volume1/ch-10.html rel="external nofollow noopener" target=_blank>IHE XDS.b</a> profile and transactions shall be used.</p> <p>To store the document metadata of the document, the the primary system shall perform a <a href=https://profiles.ihe.net/ITI/TF/Volume2/ITI-41.html rel="external nofollow noopener" target=_blank>Provide And Register Document Set [ITI-41]</a> transaction. Within the request, the primary systems shall provide the master patient ID as retrieved from the <a href=../PIXQuery/ >PIX Query</a>, the document metadata as defined in the ordinances of the Swiss <abbr title="Electronic Patient Record">EPR</abbr> and the binary data of the document. </p> <p>The community responds with a code indicating the successful registration of the document.</p> <h2 id=transaction>Transaction<a class=headerlink href=#transaction title="Permanent link"> ¶</a></h2> <h3 id=message-semantics>Message Semantics<a class=headerlink href=#message-semantics title="Permanent link"> ¶</a></h3> <p>Messages are encoded as described in the <a href=http://www.ebxml.org rel="external nofollow noopener" target=_blank>ebXML</a> standard with restrictions defined in the IHE profile and the ordinances to the Swiss <abbr title="Electronic Patient Record">EPR</abbr>.</p> <h4 id=request-message>Request Message<a class=headerlink href=#request-message title="Permanent link"> ¶</a></h4> <p>Since the <a href=http://www.ebxml.org rel="external nofollow noopener" target=_blank>ebXML</a> standard is very generic, the request message is quite lengthy and needs some background information to interpret.</p> <p>The structure of the result set is as follows (see example below):</p> <ul> <li>The metadata of the individual documents are bundled in a <em>ExtrinsicObject</em> element.</li> <li>The metadata attributes are encoded as <em>Slot</em>, as <em>Classification</em> or as <em>ExternalIdentifier</em> elements.</li> <li>Metadata attributes encoded as <em>Slots</em> can be identified and interpreted by the slot's <em>name</em> attribute.</li> <li>Metadata attributes encoded as <em>Classification</em> can be identified and interpreted by the classification's <em>classificationScheme</em> attribute.</li> <li>The unique ID of the document is encoded as <em>ExternalIdentifier</em>, which has an <em>identificationScheme</em> attribute with a fixed value.</li> </ul> <p>The table of the identifier used to indicate the metadata attributes is defined by the metadata model used by IHE XDS.b in <a href=https://profiles.ihe.net/ITI/TF/Volume3/ch-4.2.html#4.2.5.1 rel="external nofollow noopener" target=_blank>IHE ITI Technical Framework Vol. 3, Section 4.2.5.1</a> and <a href=https://profiles.ihe.net/ITI/TF/Volume3/ch-4.2.html#4.2.5.2 rel="external nofollow noopener" target=_blank>IHE ITI Technical Framework Vol. 3, Section 4.2.5.2</a> .</p> <p>The corresponding interpretation of the metadata attributes in the Swiss <abbr title="Electronic Patient Record">EPR</abbr> and the supported value sets may be found in <a href=https://www.fedlex.admin.ch/eli/oc/2023/221/de/annexes rel="external nofollow noopener" target=_blank>Annex 3</a> of the ordinances of the Swiss electronic patient dossier.</p> <p>A request message is quite lengthy. A listing with abrevations used in the step by step interpretation below is found <a href=https://github.com/ehealthsuisse/EPD-by-example/tree/main/samples/ITI-41_request.xml rel="external nofollow noopener" target=_blank>here</a>. The raw version of the request message may be found <a href=https://github.com/ehealthsuisse/EPD-by-example/tree/main/samples/ITI-41_request.xml rel="external nofollow noopener" target=_blank>here</a>.</p> <h4 id=message-interpretation>Message Interpretation<a class=headerlink href=#message-interpretation title="Permanent link"> ¶</a></h4> <p>The request message is not very complex, but lengthy due to the genericity of the ebXML standard. Therefore the following step by step interpretation may be of help to interpret the response.</p> <p>The SOAP <em>Header</em> element conveys the following information:</p> <ul> <li><em>To</em> element: The URL of the provide and register document set service.</li> <li><em>MessageID</em> element: a UUID of the message.</li> <li><em>Action</em> element: The SOAP action identifier of the request as defined in the IHE ITI Technical Framework.</li> <li><em>Security</em> element: The Web Service Security header as defined in the <a href=http://docs.oasis-open.org/wss-m/wss/v1.1.1/os/wss-SOAPMessageSecurity-v1.1.1-os.html rel="external nofollow noopener" target=_blank>WS Security</a> specification. This element conveys the <abbr title="X-User Assertion">XUA</abbr> Assertion used for authorization (see <a href=../ProvideXAssertion/ >Provide X-User Assertion</a>). </li> </ul> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SOAP header</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-3> 3</a></span>
<span class=normal><a href=#__codelineno-0-4> 4</a></span>
<span class=normal><a href=#__codelineno-0-5> 5</a></span>
<span class=normal><a href=#__codelineno-0-6> 6</a></span>
<span class=normal><a href=#__codelineno-0-7> 7</a></span>
<span class=normal><a href=#__codelineno-0-8> 8</a></span>
<span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=w> </span><span class=nt>&lt;soapenv:Header&gt;</span>
<a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>  </span><span class=nt>&lt;wsse:Security</span><span class=w> </span><span class=na>xmlns:wsse=</span><span class=s>&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;</span><span class=w> </span><span class=na>xmlns:xsi=</span><span class=s>&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class=w> </span><span class=na>xsi:nil=</span><span class=s>&quot;true&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=w>   </span><span class=nt>&lt;saml2:Assertion&gt;</span>
<a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=w>    </span><span class=cm>&lt;!-- ommitted for brevity --&gt;</span>
<a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=w>   </span><span class=nt>&lt;/saml2:Assertion&gt;</span>
<a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=w>  </span><span class=nt>&lt;/wsse:Security&gt;</span>
<a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=w>  </span><span class=nt>&lt;wsa:Action</span><span class=w> </span><span class=na>xmlns:wsa=</span><span class=s>&quot;http://www.w3.org/2005/08/addressing&quot;</span><span class=nt>&gt;</span>urn:ihe:iti:2007:ProvideAndRegisterDocumentSet-b<span class=nt>&lt;/wsa:Action&gt;</span>
<a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=w>  </span><span class=nt>&lt;wsa:MessageID</span><span class=w> </span><span class=na>xmlns:wsa=</span><span class=s>&quot;http://www.w3.org/2005/08/addressing&quot;</span><span class=nt>&gt;</span>d22ebb69-8368-4eb6-929b-b382f1b37c72<span class=nt>&lt;/wsa:MessageID&gt;</span>
<a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=w> </span><span class=nt>&lt;/soapenv:Header&gt;</span>
</code></pre></div></td></tr></table></div> <p>The SOAP <em>Body</em> element conveys the following objects in ebXML syntax:</p> <ul> <li><em>RegistryRegistryPackage</em> defining the submission set and it's metadata.</li> <li><em>ExtrinsicObject</em> defining the document metadata (matches the document metadata interpretation in <a href=../RegistryStoredQuery/#response-message>Registry Stored Query</a>).</li> <li><em>Association</em> linking the document metadata to the submission set. </li> </ul> <p>We will explain the <em>RegistryRegistryPackage</em> object defining the submission set first. For the other elements, see below. </p> <h5 id=submission-set>Submission Set<a class=headerlink href=#submission-set title="Permanent link"> ¶</a></h5> <p>The structure of the <em>RegistryPackage</em> object defining the submission set is as follows (see example below):</p> <ul> <li>The metadata attributes are encoded as <em>Slot</em>, as <em>Classification</em> or as <em>ExternalIdentifier</em> elements.</li> <li>Metadata attributes encoded as <em>Slots</em> can be identified and interpreted by the slot's <em>name</em> attribute.</li> <li>Metadata attributes encoded as <em>Classification</em> can be identified and interpreted by the classification's <em>classificationScheme</em> attribute.</li> <li>The unique ID of the document is encoded as <em>ExternalIdentifier</em>, which has an <em>identificationScheme</em> attribute with a fixed value.</li> </ul> <p>The <em>RegistryRegistryPackage</em> object defining the submission set has one <em>Slot</em> child elements with name <em>submissionTime</em> which conveys the request timestamp, and a <em>Name</em> element to convey the display name of the submission set (see lines 17 to 25 below).</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>RegistryRegistryPackage element</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-17>17</a></span>
<span class=normal><a href=#__codelineno-1-18>18</a></span>
<span class=normal><a href=#__codelineno-1-19>19</a></span>
<span class=normal><a href=#__codelineno-1-20>20</a></span>
<span class=normal><a href=#__codelineno-1-21>21</a></span>
<span class=normal><a href=#__codelineno-1-22>22</a></span>
<span class=normal><a href=#__codelineno-1-23>23</a></span>
<span class=normal><a href=#__codelineno-1-24>24</a></span>
<span class=normal><a href=#__codelineno-1-25>25</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-17 name=__codelineno-1-17></a><span class=w>     </span><span class=nt>&lt;rim:RegistryPackage</span><span class=w> </span><span class=na>id=</span><span class=s>&quot;6BCBAF38-3D23-CC4C-80F3-30779B1174E3&quot;</span><span class=w> </span><span class=na>objectType=</span><span class=s>&quot;urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-1-18 name=__codelineno-1-18></a><span class=w>      </span><span class=nt>&lt;rim:Slot</span><span class=w> </span><span class=na>name=</span><span class=s>&quot;submissionTime&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-1-19 name=__codelineno-1-19></a><span class=w>       </span><span class=nt>&lt;rim:ValueList&gt;</span>
<a id=__codelineno-1-20 name=__codelineno-1-20></a><span class=w>        </span><span class=nt>&lt;rim:Value&gt;</span>20200924174309<span class=nt>&lt;/rim:Value&gt;</span>
<a id=__codelineno-1-21 name=__codelineno-1-21></a><span class=w>       </span><span class=nt>&lt;/rim:ValueList&gt;</span>
<a id=__codelineno-1-22 name=__codelineno-1-22></a><span class=w>      </span><span class=nt>&lt;/rim:Slot&gt;</span>
<a id=__codelineno-1-23 name=__codelineno-1-23></a><span class=w>      </span><span class=nt>&lt;rim:Name&gt;</span>
<a id=__codelineno-1-24 name=__codelineno-1-24></a><span class=w>       </span><span class=nt>&lt;rim:LocalizedString</span><span class=w> </span><span class=na>value=</span><span class=s>&quot;DocumentSet&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-1-25 name=__codelineno-1-25></a><span class=w>      </span><span class=nt>&lt;/rim:Name&gt;</span>
</code></pre></div></td></tr></table></div> <p>The <em>RegistryRegistryPackage</em> object defining the submission set has three <em>Classification</em> child elements conveying the submission set metadata:</p> <ul> <li>Content Type Code: The submission set content type code attribute, indicated by the value of the classificationScheme equal to <em>urn:uuid:aa543740-bdda-424e-8c96-df4873be8500</em>. The value conveyed with the nodeRepresentation attribute and the codingScheme value must match one of the supported values in the Swiss <abbr title="Electronic Patient Record">EPR</abbr> as defined in Annex 3.</li> <li>submission author: The submission set author element, indicated by the value of the classificationScheme equal to <em>urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d</em>. The author element is optional in the <abbr title="Electronic Patient Record">EPR</abbr>. If present, it shall convey the information on the person, which initiated the request.</li> <li>submission set identificator: An element with classification scheme <em>urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd</em> required to identify the <em>RegistryPackage</em> object as a XDS.b submission set.</li> </ul> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>RegistryRegistryPackage element</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-26>26</a></span>
<span class=normal><a href=#__codelineno-2-27>27</a></span>
<span class=normal><a href=#__codelineno-2-28>28</a></span>
<span class=normal><a href=#__codelineno-2-29>29</a></span>
<span class=normal><a href=#__codelineno-2-30>30</a></span>
<span class=normal><a href=#__codelineno-2-31>31</a></span>
<span class=normal><a href=#__codelineno-2-32>32</a></span>
<span class=normal><a href=#__codelineno-2-33>33</a></span>
<span class=normal><a href=#__codelineno-2-34>34</a></span>
<span class=normal><a href=#__codelineno-2-35>35</a></span>
<span class=normal><a href=#__codelineno-2-36>36</a></span>
<span class=normal><a href=#__codelineno-2-37>37</a></span>
<span class=normal><a href=#__codelineno-2-38>38</a></span>
<span class=normal><a href=#__codelineno-2-39>39</a></span>
<span class=normal><a href=#__codelineno-2-40>40</a></span>
<span class=normal><a href=#__codelineno-2-41>41</a></span>
<span class=normal><a href=#__codelineno-2-42>42</a></span>
<span class=normal><a href=#__codelineno-2-43>43</a></span>
<span class=normal><a href=#__codelineno-2-44>44</a></span>
<span class=normal><a href=#__codelineno-2-45>45</a></span>
<span class=normal><a href=#__codelineno-2-46>46</a></span>
<span class=normal><a href=#__codelineno-2-47>47</a></span>
<span class=normal><a href=#__codelineno-2-48>48</a></span>
<span class=normal><a href=#__codelineno-2-49>49</a></span>
<span class=normal><a href=#__codelineno-2-50>50</a></span>
<span class=normal><a href=#__codelineno-2-51>51</a></span>
<span class=normal><a href=#__codelineno-2-52>52</a></span>
<span class=normal><a href=#__codelineno-2-53>53</a></span>
<span class=normal><a href=#__codelineno-2-54>54</a></span>
<span class=normal><a href=#__codelineno-2-55>55</a></span>
<span class=normal><a href=#__codelineno-2-56>56</a></span>
<span class=normal><a href=#__codelineno-2-57>57</a></span>
<span class=normal><a href=#__codelineno-2-58>58</a></span>
<span class=normal><a href=#__codelineno-2-59>59</a></span>
<span class=normal><a href=#__codelineno-2-60>60</a></span>
<span class=normal><a href=#__codelineno-2-61>61</a></span>
<span class=normal><a href=#__codelineno-2-62>62</a></span>
<span class=normal><a href=#__codelineno-2-63>63</a></span>
<span class=normal><a href=#__codelineno-2-64>64</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-26 name=__codelineno-2-26></a><span class=w>      </span><span class=nt>&lt;rim:Classification</span>
<a id=__codelineno-2-27 name=__codelineno-2-27></a><span class=w>       </span><span class=na>classificationScheme=</span><span class=s>&quot;urn:uuid:aa543740-bdda-424e-8c96-df4873be8500&quot;</span>
<a id=__codelineno-2-28 name=__codelineno-2-28></a><span class=w>       </span><span class=na>classifiedObject=</span><span class=s>&quot;6BCBAF38-3D23-CC4C-80F3-30779B1174E3&quot;</span>
<a id=__codelineno-2-29 name=__codelineno-2-29></a><span class=w>       </span><span class=na>id=</span><span class=s>&quot;517159EC-2731-F908-83DC-B90251B0E9AF&quot;</span>
<a id=__codelineno-2-30 name=__codelineno-2-30></a><span class=w>       </span><span class=na>nodeRepresentation=</span><span class=s>&quot;424975005&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-2-31 name=__codelineno-2-31></a><span class=w>       </span><span class=nt>&lt;rim:Slot</span><span class=w> </span><span class=na>name=</span><span class=s>&quot;codingScheme&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-2-32 name=__codelineno-2-32></a><span class=w>        </span><span class=nt>&lt;rim:ValueList&gt;</span>
<a id=__codelineno-2-33 name=__codelineno-2-33></a><span class=w>         </span><span class=nt>&lt;rim:Value&gt;</span>2.16.840.1.113883.6.96<span class=nt>&lt;/rim:Value&gt;</span>
<a id=__codelineno-2-34 name=__codelineno-2-34></a><span class=w>        </span><span class=nt>&lt;/rim:ValueList&gt;</span>
<a id=__codelineno-2-35 name=__codelineno-2-35></a><span class=w>       </span><span class=nt>&lt;/rim:Slot&gt;</span>
<a id=__codelineno-2-36 name=__codelineno-2-36></a><span class=w>       </span><span class=nt>&lt;rim:Name&gt;</span>
<a id=__codelineno-2-37 name=__codelineno-2-37></a><span class=w>        </span><span class=nt>&lt;rim:LocalizedString</span><span class=w> </span><span class=na>value=</span><span class=s>&quot;Other EPD-document type&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-2-38 name=__codelineno-2-38></a><span class=w>       </span><span class=nt>&lt;/rim:Name&gt;</span>
<a id=__codelineno-2-39 name=__codelineno-2-39></a><span class=w>      </span><span class=nt>&lt;/rim:Classification&gt;</span>
<a id=__codelineno-2-40 name=__codelineno-2-40></a><span class=w>      </span><span class=nt>&lt;rim:Classification</span>
<a id=__codelineno-2-41 name=__codelineno-2-41></a><span class=w>       </span><span class=na>classificationScheme=</span><span class=s>&quot;urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d&quot;</span>
<a id=__codelineno-2-42 name=__codelineno-2-42></a><span class=w>       </span><span class=na>classifiedObject=</span><span class=s>&quot;6BCBAF38-3D23-CC4C-80F3-30779B1174E3&quot;</span>
<a id=__codelineno-2-43 name=__codelineno-2-43></a><span class=w>       </span><span class=na>id=</span><span class=s>&quot;58089FCD-E400-D25A-73C2-2F6B5DCBBE2E&quot;</span>
<a id=__codelineno-2-44 name=__codelineno-2-44></a><span class=w>       </span><span class=na>nodeRepresentation=</span><span class=s>&quot;&quot;</span>
<a id=__codelineno-2-45 name=__codelineno-2-45></a><span class=w>       </span><span class=na>objectType=</span><span class=s>&quot;urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-2-46 name=__codelineno-2-46></a><span class=w>       </span><span class=nt>&lt;rim:Slot</span><span class=w> </span><span class=na>name=</span><span class=s>&quot;authorPerson&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-2-47 name=__codelineno-2-47></a><span class=w>        </span><span class=nt>&lt;rim:ValueList&gt;</span>
<a id=__codelineno-2-48 name=__codelineno-2-48></a><span class=w>         </span><span class=nt>&lt;rim:Value&gt;</span>^Schulz^Max^^^<span class=nt>&lt;/rim:Value&gt;</span>
<a id=__codelineno-2-49 name=__codelineno-2-49></a><span class=w>        </span><span class=nt>&lt;/rim:ValueList&gt;</span>
<a id=__codelineno-2-50 name=__codelineno-2-50></a><span class=w>       </span><span class=nt>&lt;/rim:Slot&gt;</span>
<a id=__codelineno-2-51 name=__codelineno-2-51></a><span class=w>       </span><span class=nt>&lt;rim:Slot</span><span class=w> </span><span class=na>name=</span><span class=s>&quot;authorRole&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-2-52 name=__codelineno-2-52></a><span class=w>        </span><span class=nt>&lt;rim:ValueList&gt;</span>
<a id=__codelineno-2-53 name=__codelineno-2-53></a><span class=w>         </span><span class=nt>&lt;rim:Value&gt;</span>Healthcare<span class=w> </span>professional<span class=nt>&lt;/rim:Value&gt;</span>
<a id=__codelineno-2-54 name=__codelineno-2-54></a><span class=w>        </span><span class=nt>&lt;/rim:ValueList&gt;</span>
<a id=__codelineno-2-55 name=__codelineno-2-55></a><span class=w>       </span><span class=nt>&lt;/rim:Slot&gt;</span>
<a id=__codelineno-2-56 name=__codelineno-2-56></a><span class=w>       </span><span class=nt>&lt;rim:Name&gt;</span>
<a id=__codelineno-2-57 name=__codelineno-2-57></a><span class=w>        </span><span class=nt>&lt;rim:LocalizedString</span><span class=w> </span><span class=na>value=</span><span class=s>&quot;XDSSubmissionSet.author&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-2-58 name=__codelineno-2-58></a><span class=w>       </span><span class=nt>&lt;/rim:Name&gt;</span>
<a id=__codelineno-2-59 name=__codelineno-2-59></a><span class=w>      </span><span class=nt>&lt;/rim:Classification&gt;</span>
<a id=__codelineno-2-60 name=__codelineno-2-60></a><span class=w>      </span><span class=nt>&lt;rim:Classification</span>
<a id=__codelineno-2-61 name=__codelineno-2-61></a><span class=w>       </span><span class=na>classificationNode=</span><span class=s>&quot;urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd&quot;</span>
<a id=__codelineno-2-62 name=__codelineno-2-62></a><span class=w>       </span><span class=na>classifiedObject=</span><span class=s>&quot;6BCBAF38-3D23-CC4C-80F3-30779B1174E3&quot;</span>
<a id=__codelineno-2-63 name=__codelineno-2-63></a><span class=w>       </span><span class=na>id=</span><span class=s>&quot;B6E18810-CD5B-3DCB-1B07-E510FE593365&quot;</span>
<a id=__codelineno-2-64 name=__codelineno-2-64></a><span class=w>       </span><span class=na>objectType=</span><span class=s>&quot;urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification&quot;</span><span class=nt>/&gt;</span>
</code></pre></div></td></tr></table></div> <p>The <em>RegistryRegistryPackage</em> object defining the submission set has three <em>ExternalIdentifier</em> child elements:</p> <ul> <li><em>XDSSubmissionSet.sourceId</em>: Conveys the OID of the primary system performing the request.</li> <li><em>XDSSubmissionSet.uniqueId</em>: Conveys a UUID of the submission set.</li> <li><em>XDSSubmissionSet.patientId</em>: The master patient ID (XAD-PID) of the patient in CX format (see <a href=../PIXFeed/ >PIX Feed</a>).</li> </ul> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>RegistryRegistryPackage element</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-65>65</a></span>
<span class=normal><a href=#__codelineno-3-66>66</a></span>
<span class=normal><a href=#__codelineno-3-67>67</a></span>
<span class=normal><a href=#__codelineno-3-68>68</a></span>
<span class=normal><a href=#__codelineno-3-69>69</a></span>
<span class=normal><a href=#__codelineno-3-70>70</a></span>
<span class=normal><a href=#__codelineno-3-71>71</a></span>
<span class=normal><a href=#__codelineno-3-72>72</a></span>
<span class=normal><a href=#__codelineno-3-73>73</a></span>
<span class=normal><a href=#__codelineno-3-74>74</a></span>
<span class=normal><a href=#__codelineno-3-75>75</a></span>
<span class=normal><a href=#__codelineno-3-76>76</a></span>
<span class=normal><a href=#__codelineno-3-77>77</a></span>
<span class=normal><a href=#__codelineno-3-78>78</a></span>
<span class=normal><a href=#__codelineno-3-79>79</a></span>
<span class=normal><a href=#__codelineno-3-80>80</a></span>
<span class=normal><a href=#__codelineno-3-81>81</a></span>
<span class=normal><a href=#__codelineno-3-82>82</a></span>
<span class=normal><a href=#__codelineno-3-83>83</a></span>
<span class=normal><a href=#__codelineno-3-84>84</a></span>
<span class=normal><a href=#__codelineno-3-85>85</a></span>
<span class=normal><a href=#__codelineno-3-86>86</a></span>
<span class=normal><a href=#__codelineno-3-87>87</a></span>
<span class=normal><a href=#__codelineno-3-88>88</a></span>
<span class=normal><a href=#__codelineno-3-89>89</a></span>
<span class=normal><a href=#__codelineno-3-90>90</a></span>
<span class=normal><a href=#__codelineno-3-91>91</a></span>
<span class=normal><a href=#__codelineno-3-92>92</a></span>
<span class=normal><a href=#__codelineno-3-93>93</a></span>
<span class=normal><a href=#__codelineno-3-94>94</a></span>
<span class=normal><a href=#__codelineno-3-95>95</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-65 name=__codelineno-3-65></a><span class=w>      </span><span class=nt>&lt;rim:ExternalIdentifier</span>
<a id=__codelineno-3-66 name=__codelineno-3-66></a><span class=w>       </span><span class=na>id=</span><span class=s>&quot;013AD74B-3180-8B49-9D51-440F3C9B16B8&quot;</span>
<a id=__codelineno-3-67 name=__codelineno-3-67></a><span class=w>       </span><span class=na>identificationScheme=</span><span class=s>&quot;urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832&quot;</span>
<a id=__codelineno-3-68 name=__codelineno-3-68></a><span class=w>       </span><span class=na>objectType=</span><span class=s>&quot;urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier&quot;</span>
<a id=__codelineno-3-69 name=__codelineno-3-69></a><span class=w>       </span><span class=na>registryObject=</span><span class=s>&quot;6BCBAF38-3D23-CC4C-80F3-30779B1174E3&quot;</span>
<a id=__codelineno-3-70 name=__codelineno-3-70></a><span class=w>       </span><span class=na>value=</span><span class=s>&quot;1.3.6.1.4.1.21367.2017.2.5.45&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-3-71 name=__codelineno-3-71></a><span class=w>       </span><span class=nt>&lt;rim:Name&gt;</span>
<a id=__codelineno-3-72 name=__codelineno-3-72></a><span class=w>        </span><span class=nt>&lt;rim:LocalizedString</span><span class=w> </span><span class=na>value=</span><span class=s>&quot;XDSSubmissionSet.sourceId&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-3-73 name=__codelineno-3-73></a><span class=w>       </span><span class=nt>&lt;/rim:Name&gt;</span>
<a id=__codelineno-3-74 name=__codelineno-3-74></a><span class=w>      </span><span class=nt>&lt;/rim:ExternalIdentifier&gt;</span>
<a id=__codelineno-3-75 name=__codelineno-3-75></a><span class=w>      </span><span class=nt>&lt;rim:ExternalIdentifier</span>
<a id=__codelineno-3-76 name=__codelineno-3-76></a><span class=w>       </span><span class=na>id=</span><span class=s>&quot;1AF2498A-C98E-5123-970E-F28AC2BCC536&quot;</span>
<a id=__codelineno-3-77 name=__codelineno-3-77></a><span class=w>       </span><span class=na>identificationScheme=</span><span class=s>&quot;urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8&quot;</span>
<a id=__codelineno-3-78 name=__codelineno-3-78></a><span class=w>       </span><span class=na>objectType=</span><span class=s>&quot;urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier&quot;</span>
<a id=__codelineno-3-79 name=__codelineno-3-79></a><span class=w>       </span><span class=na>registryObject=</span><span class=s>&quot;6BCBAF38-3D23-CC4C-80F3-30779B1174E3&quot;</span>
<a id=__codelineno-3-80 name=__codelineno-3-80></a><span class=w>       </span><span class=na>value=</span><span class=s>&quot;1.42.1.2018072257142615.7000&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-3-81 name=__codelineno-3-81></a><span class=w>       </span><span class=nt>&lt;rim:Name&gt;</span>
<a id=__codelineno-3-82 name=__codelineno-3-82></a><span class=w>        </span><span class=nt>&lt;rim:LocalizedString</span><span class=w> </span><span class=na>value=</span><span class=s>&quot;XDSSubmissionSet.uniqueId&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-3-83 name=__codelineno-3-83></a><span class=w>       </span><span class=nt>&lt;/rim:Name&gt;</span>
<a id=__codelineno-3-84 name=__codelineno-3-84></a><span class=w>      </span><span class=nt>&lt;/rim:ExternalIdentifier&gt;</span>
<a id=__codelineno-3-85 name=__codelineno-3-85></a><span class=w>      </span><span class=nt>&lt;rim:ExternalIdentifier</span>
<a id=__codelineno-3-86 name=__codelineno-3-86></a><span class=w>       </span><span class=na>id=</span><span class=s>&quot;2A8B3E1A-203C-5313-1FAA-EA2577C235B6&quot;</span>
<a id=__codelineno-3-87 name=__codelineno-3-87></a><span class=w>       </span><span class=na>identificationScheme=</span><span class=s>&quot;urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446&quot;</span>
<a id=__codelineno-3-88 name=__codelineno-3-88></a><span class=w>       </span><span class=na>objectType=</span><span class=s>&quot;urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier&quot;</span>
<a id=__codelineno-3-89 name=__codelineno-3-89></a><span class=w>       </span><span class=na>registryObject=</span><span class=s>&quot;6BCBAF38-3D23-CC4C-80F3-30779B1174E3&quot;</span>
<a id=__codelineno-3-90 name=__codelineno-3-90></a><span class=w>       </span><span class=na>value=</span><span class=s>&quot;0936c240-486e-4839-a322-793de7185f99^^^&amp;amp;1.3.6.1.4.1.21367.2017.2.5.45&amp;amp;ISO&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-3-91 name=__codelineno-3-91></a><span class=w>       </span><span class=nt>&lt;rim:Name&gt;</span>
<a id=__codelineno-3-92 name=__codelineno-3-92></a><span class=w>        </span><span class=nt>&lt;rim:LocalizedString</span><span class=w> </span><span class=na>value=</span><span class=s>&quot;XDSSubmissionSet.patientId&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-3-93 name=__codelineno-3-93></a><span class=w>       </span><span class=nt>&lt;/rim:Name&gt;</span>
<a id=__codelineno-3-94 name=__codelineno-3-94></a><span class=w>      </span><span class=nt>&lt;/rim:ExternalIdentifier&gt;</span>
<a id=__codelineno-3-95 name=__codelineno-3-95></a><span class=w>     </span><span class=nt>&lt;/rim:RegistryPackage&gt;</span>
</code></pre></div></td></tr></table></div> <h5 id=document-metadata>Document Metadata<a class=headerlink href=#document-metadata title="Permanent link"> ¶</a></h5> <p>The request contains 1..N <em>ExtrinsicObject</em> representing the document metadata for each document. The interpretation of the document metadata matches the document metadata interpretation, which is explained in detail in step by step example in the Registry Stored Query page and will not be reproduced here. Please see <a href=../RegistryStoredQuery/#response-message>Registry Stored Query</a> for the interpretation of the document metadata.</p> <h5 id=association>Association<a class=headerlink href=#association title="Permanent link"> ¶</a></h5> <p>The request contains one <em>Association</em> object linking the document and document metadata to a submission set defined in the <em>RegistryPackage</em> (see <a href=./#submission-set>Submission Set</a>).</p> <p>The <em>Association</em> object thus conveys two parameter to link the objects:</p> <ul> <li><em>sourceObject</em>: The attribute value must match the <em>id</em> attribute of the submission set <em>RegistryPackage</em>.</li> <li><em>targetObject</em>: The attribute value must match the <em>id</em> attribute value of the document metadata <em>ExtrinsicObject</em>. </li> </ul> <p>In addition the <em>Association</em> object conveys a status indicator, which must take the value <em>Original</em> (see snippet below).</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Association element</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-277>277</a></span>
<span class=normal><a href=#__codelineno-4-278>278</a></span>
<span class=normal><a href=#__codelineno-4-279>279</a></span>
<span class=normal><a href=#__codelineno-4-280>280</a></span>
<span class=normal><a href=#__codelineno-4-281>281</a></span>
<span class=normal><a href=#__codelineno-4-282>282</a></span>
<span class=normal><a href=#__codelineno-4-283>283</a></span>
<span class=normal><a href=#__codelineno-4-284>284</a></span>
<span class=normal><a href=#__codelineno-4-285>285</a></span>
<span class=normal><a href=#__codelineno-4-286>286</a></span>
<span class=normal><a href=#__codelineno-4-287>287</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-277 name=__codelineno-4-277></a><span class=w>     </span><span class=nt>&lt;rim:Association</span>
<a id=__codelineno-4-278 name=__codelineno-4-278></a><span class=w>      </span><span class=na>associationType=</span><span class=s>&quot;urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember&quot;</span>
<a id=__codelineno-4-279 name=__codelineno-4-279></a><span class=w>      </span><span class=na>id=</span><span class=s>&quot;5A36769E-DE9B-3A3F-9F37-CD6B962BAFB6&quot;</span>
<a id=__codelineno-4-280 name=__codelineno-4-280></a><span class=w>      </span><span class=na>sourceObject=</span><span class=s>&quot;6BCBAF38-3D23-CC4C-80F3-30779B1174E3&quot;</span>
<a id=__codelineno-4-281 name=__codelineno-4-281></a><span class=w>      </span><span class=na>targetObject=</span><span class=s>&quot;A4E2E0D2-0C34-19F4-9B0B-3ED15D71A546&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-4-282 name=__codelineno-4-282></a><span class=w>      </span><span class=nt>&lt;rim:Slot</span><span class=w> </span><span class=na>name=</span><span class=s>&quot;SubmissionSetStatus&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-4-283 name=__codelineno-4-283></a><span class=w>       </span><span class=nt>&lt;rim:ValueList&gt;</span>
<a id=__codelineno-4-284 name=__codelineno-4-284></a><span class=w>        </span><span class=nt>&lt;rim:Value&gt;</span>Original<span class=nt>&lt;/rim:Value&gt;</span>
<a id=__codelineno-4-285 name=__codelineno-4-285></a><span class=w>       </span><span class=nt>&lt;/rim:ValueList&gt;</span>
<a id=__codelineno-4-286 name=__codelineno-4-286></a><span class=w>      </span><span class=nt>&lt;/rim:Slot&gt;</span>
<a id=__codelineno-4-287 name=__codelineno-4-287></a><span class=w>     </span><span class=nt>&lt;/rim:Association&gt;</span>
</code></pre></div></td></tr></table></div> <h4 id=response-message>Response Message<a class=headerlink href=#response-message title="Permanent link"> ¶</a></h4> <p>The provide and register service responds with a message indicating the success of the transaction. The outcome indicator is encoded in the <em>Body</em> element of the SOAP envelope as follows:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-5-9 name=__codelineno-5-9></a><span class=w>  </span><span class=nt>&lt;ns2:RegistryResponse</span><span class=w> </span><span class=na>xmlns=</span><span class=s>&quot; !--namespace ommitted &quot;</span><span class=w> </span><span class=na>status=</span><span class=s>&quot;urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success&quot;</span><span class=nt>/&gt;</span>.
</code></pre></div></td></tr></table></div> <p>The raw version of a response message may be found <a href=https://github.com/ehealthsuisse/EPD-by-example/tree/main/samples/ITI-41_response.xml rel="external nofollow noopener" target=_blank>here</a>.</p> <h3 id=transport-protocol>Transport Protocol<a class=headerlink href=#transport-protocol title="Permanent link"> ¶</a></h3> <p>The system shall send the request messages to the repository service of the community using the MIME Multipart/Related binding as specified in the SOAP <a href=https://www.w3.org/TR/soap12-mtom/ rel="external nofollow noopener" target=_blank>MTOM specification</a> of the W3C.</p> <p>The request in MTOM format may look as follows:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1> 1</a></span>
<span class=normal><a href=#__codelineno-6-2> 2</a></span>
<span class=normal><a href=#__codelineno-6-3> 3</a></span>
<span class=normal><a href=#__codelineno-6-4> 4</a></span>
<span class=normal><a href=#__codelineno-6-5> 5</a></span>
<span class=normal><a href=#__codelineno-6-6> 6</a></span>
<span class=normal><a href=#__codelineno-6-7> 7</a></span>
<span class=normal><a href=#__codelineno-6-8> 8</a></span>
<span class=normal><a href=#__codelineno-6-9> 9</a></span>
<span class=normal><a href=#__codelineno-6-10>10</a></span>
<span class=normal><a href=#__codelineno-6-11>11</a></span>
<span class=normal><a href=#__codelineno-6-12>12</a></span>
<span class=normal><a href=#__codelineno-6-13>13</a></span>
<span class=normal><a href=#__codelineno-6-14>14</a></span>
<span class=normal><a href=#__codelineno-6-15>15</a></span>
<span class=normal><a href=#__codelineno-6-16>16</a></span>
<span class=normal><a href=#__codelineno-6-17>17</a></span>
<span class=normal><a href=#__codelineno-6-18>18</a></span>
<span class=normal><a href=#__codelineno-6-19>19</a></span>
<span class=normal><a href=#__codelineno-6-20>20</a></span>
<span class=normal><a href=#__codelineno-6-21>21</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=nf>POST</span> <span class=nn>/XDSDocumentRepositoryService</span> <span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span>
<a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=na>Host</span><span class=o>:</span> <span class=l>10.2.101.10:11076</span>
<a id=__codelineno-6-3 name=__codelineno-6-3></a><span class=na>Content-Type</span><span class=o>:</span> <span class=l>multipart/related; boundary=&quot;MIMEBoundary_05b39a33e8effeb90c1ccb1c58c4b93b5af2935a13853149&quot;; type=&quot;application/xop+xml&quot;; start=&quot;&lt;0.15b39a33e8effeb90c1ccb1c58c4b93b5af2935a13853149@apache.org&gt;&quot;; start-info=&quot;application/soap+xml&quot;; action=&quot;urn:ihe:iti:2007:ProvideAndRegisterDocumentSet-b&quot;</span>
<a id=__codelineno-6-4 name=__codelineno-6-4></a><span class=na>Connection</span><span class=o>:</span> <span class=l>Keep-Alive</span>
<a id=__codelineno-6-5 name=__codelineno-6-5></a><span class=na>Content-Length</span><span class=o>:</span> <span class=l>181931</span>
<a id=__codelineno-6-6 name=__codelineno-6-6></a>
<a id=__codelineno-6-7 name=__codelineno-6-7></a><span class=err>--MIMEBoundary_05b39a33e8effeb90c1ccb1c58c4b93b5af2935a13853149</span>
<a id=__codelineno-6-8 name=__codelineno-6-8></a><span class=nt>Content-Type:</span><span class=w> </span><span class=nl>application</span><span class=dl>/</span><span class=nl>xop</span><span class=err>+xml</span>;<span class=w> </span><span class=na>charset</span><span class=o>=</span><span class=s>utf-8</span>;<span class=w> </span><span class=na>type</span><span class=o>=</span><span class=s>&quot;application/soap+xml&quot;</span>
<a id=__codelineno-6-9 name=__codelineno-6-9></a><span class=nt>Content-Transfer-Encoding:</span><span class=w> </span><span class=no>binary</span>
<a id=__codelineno-6-10 name=__codelineno-6-10></a><span class=c>Content-ID: &lt;0.15b39a33e8effeb90c1ccb1c58c4b93b5af2935a13853149@apache.org&gt;</span>
<a id=__codelineno-6-11 name=__codelineno-6-11></a>
<a id=__codelineno-6-12 name=__codelineno-6-12></a><span class=x>&lt;!-- message omittedd --&gt;</span>
<a id=__codelineno-6-13 name=__codelineno-6-13></a>
<a id=__codelineno-6-14 name=__codelineno-6-14></a><span class=x>--MIMEBoundary_05b39a33e8effeb90c1ccb1c58c4b93b5af2935a13853149</span>
<a id=__codelineno-6-15 name=__codelineno-6-15></a><span class=x>Content-Type: application/octet-stream</span>
<a id=__codelineno-6-16 name=__codelineno-6-16></a><span class=x>Content-Transfer-Encoding: binary</span>
<a id=__codelineno-6-17 name=__codelineno-6-17></a><span class=x>Content-ID: &lt;1.c5b39a33e8effeb94a97121c58c4b93b53d2935a13853149@apache.org&gt;</span>
<a id=__codelineno-6-18 name=__codelineno-6-18></a>
<a id=__codelineno-6-19 name=__codelineno-6-19></a><span class=x>&lt;!-- binary document data omitted --&gt;</span>
<a id=__codelineno-6-20 name=__codelineno-6-20></a>
<a id=__codelineno-6-21 name=__codelineno-6-21></a><span class=x>--MIMEBoundary_05b39a33e8effeb90c1ccb1c58c4b93b5af2935a13853149--</span>
</code></pre></div></td></tr></table></div> <p>The provide and register service sends the response message in the MIME Multipart/Related binding as specified in the SOAP <a href=https://www.w3.org/TR/soap12-mtom/ rel="external nofollow noopener" target=_blank>MTOM specification</a> of the W3C.</p> <p>The response in MTOM format may look as follows:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1> 1</a></span>
<span class=normal><a href=#__codelineno-7-2> 2</a></span>
<span class=normal><a href=#__codelineno-7-3> 3</a></span>
<span class=normal><a href=#__codelineno-7-4> 4</a></span>
<span class=normal><a href=#__codelineno-7-5> 5</a></span>
<span class=normal><a href=#__codelineno-7-6> 6</a></span>
<span class=normal><a href=#__codelineno-7-7> 7</a></span>
<span class=normal><a href=#__codelineno-7-8> 8</a></span>
<span class=normal><a href=#__codelineno-7-9> 9</a></span>
<span class=normal><a href=#__codelineno-7-10>10</a></span>
<span class=normal><a href=#__codelineno-7-11>11</a></span>
<span class=normal><a href=#__codelineno-7-12>12</a></span>
<span class=normal><a href=#__codelineno-7-13>13</a></span>
<span class=normal><a href=#__codelineno-7-14>14</a></span>
<span class=normal><a href=#__codelineno-7-15>15</a></span>
<span class=normal><a href=#__codelineno-7-16>16</a></span>
<span class=normal><a href=#__codelineno-7-17>17</a></span>
<span class=normal><a href=#__codelineno-7-18>18</a></span>
<span class=normal><a href=#__codelineno-7-19>19</a></span>
<span class=normal><a href=#__codelineno-7-20>20</a></span>
<span class=normal><a href=#__codelineno-7-21>21</a></span>
<span class=normal><a href=#__codelineno-7-22>22</a></span>
<span class=normal><a href=#__codelineno-7-23>23</a></span>
<span class=normal><a href=#__codelineno-7-24>24</a></span>
<span class=normal><a href=#__codelineno-7-25>25</a></span>
<span class=normal><a href=#__codelineno-7-26>26</a></span>
<span class=normal><a href=#__codelineno-7-27>27</a></span>
<span class=normal><a href=#__codelineno-7-28>28</a></span>
<span class=normal><a href=#__codelineno-7-29>29</a></span>
<span class=normal><a href=#__codelineno-7-30>30</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=err>DefaultHttpResponse(chunked: false)</span>
<a id=__codelineno-7-2 name=__codelineno-7-2></a><span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span> <span class=m>200</span> <span class=ne>OK</span>
<a id=__codelineno-7-3 name=__codelineno-7-3></a><span class=na>Connection</span><span class=o>:</span> <span class=l>keep-alive</span>
<a id=__codelineno-7-4 name=__codelineno-7-4></a><span class=na>Content-Type</span><span class=o>:</span> <span class=l>multipart/related; type=&quot;application/xop+xml&quot;; boundary=&quot;uuid:2a1acced-0234-4a54-8dd3-b9f9b753169c&quot;; start=&quot;&lt;root.message@cxf.apache.org&gt;&quot;; start-info=&quot;application/soap+xml&quot;</span>
<a id=__codelineno-7-5 name=__codelineno-7-5></a><span class=na>Date</span><span class=o>:</span> <span class=l>Thu, 24 Sep 2020 15:43:11 GMT</span>
<a id=__codelineno-7-6 name=__codelineno-7-6></a><span class=na>Content-Length</span><span class=o>:</span> <span class=l>1136</span>
<a id=__codelineno-7-7 name=__codelineno-7-7></a>
<a id=__codelineno-7-8 name=__codelineno-7-8></a><span class=c>--uuid:2a1acced-0234-4a54-8dd3-b9f9b753169c</span>
<a id=__codelineno-7-9 name=__codelineno-7-9></a><span class=nt>Content-Type:</span><span class=w> </span><span class=nl>application</span><span class=dl>/</span><span class=nl>xop</span><span class=err>+xml</span>;<span class=w> </span><span class=na>charset</span><span class=o>=</span><span class=s>UTF-8</span>;<span class=w> </span><span class=na>type</span><span class=o>=</span><span class=s>&quot;application/soap+xml&quot;</span>
<a id=__codelineno-7-10 name=__codelineno-7-10></a><span class=nt>Content-Transfer-Encoding:</span><span class=w> </span><span class=no>binary</span>
<a id=__codelineno-7-11 name=__codelineno-7-11></a><span class=c>Content-ID: &lt;root.message@cxf.apache.org&gt;</span>
<a id=__codelineno-7-12 name=__codelineno-7-12></a>
<a id=__codelineno-7-13 name=__codelineno-7-13></a><span class=x>&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;</span>
<a id=__codelineno-7-14 name=__codelineno-7-14></a><span class=x>&lt;soap:Envelope xmlns:soap=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;</span>
<a id=__codelineno-7-15 name=__codelineno-7-15></a><span class=x> &lt;soap:Header&gt;</span>
<a id=__codelineno-7-16 name=__codelineno-7-16></a><span class=x>  &lt;Action xmlns=&quot;http://www.w3.org/2005/08/addressing&quot; soap:mustUnderstand=&quot;true&quot;&gt;urn:ihe:iti:2007:ProvideAndRegisterDocumentSet-bResponse&lt;/Action&gt;</span>
<a id=__codelineno-7-17 name=__codelineno-7-17></a><span class=x>  &lt;MessageID xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;urn:uuid:3dbfa2b7-3cd6-46b3-b642-9569bb3b43fb&lt;/MessageID&gt;</span>
<a id=__codelineno-7-18 name=__codelineno-7-18></a><span class=x>  &lt;To xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/To&gt;</span>
<a id=__codelineno-7-19 name=__codelineno-7-19></a><span class=x>  &lt;RelatesTo xmlns=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;d22ebb69-8368-4eb6-929b-b382f1b37c72&lt;/RelatesTo&gt;</span>
<a id=__codelineno-7-20 name=__codelineno-7-20></a><span class=x> &lt;/soap:Header&gt;</span>
<a id=__codelineno-7-21 name=__codelineno-7-21></a><span class=x> &lt;soap:Body&gt;</span>
<a id=__codelineno-7-22 name=__codelineno-7-22></a><span class=x>  &lt;ns2:RegistryResponse</span>
<a id=__codelineno-7-23 name=__codelineno-7-23></a><span class=x>  xmlns=&quot;urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0&quot;</span>
<a id=__codelineno-7-24 name=__codelineno-7-24></a><span class=x>  xmlns:ns2=&quot;urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0&quot;</span>
<a id=__codelineno-7-25 name=__codelineno-7-25></a><span class=x>  xmlns:ns3=&quot;urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0&quot;</span>
<a id=__codelineno-7-26 name=__codelineno-7-26></a><span class=x>  xmlns:ns4=&quot;urn:ihe:iti:xds-b:2007&quot;</span>
<a id=__codelineno-7-27 name=__codelineno-7-27></a><span class=x>  status=&quot;urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success&quot;/&gt;</span>
<a id=__codelineno-7-28 name=__codelineno-7-28></a><span class=x> &lt;/soap:Body&gt;</span>
<a id=__codelineno-7-29 name=__codelineno-7-29></a><span class=x>&lt;/soap:Envelope&gt;</span>
<a id=__codelineno-7-30 name=__codelineno-7-30></a><span class=x>--uuid:2a1acced-0234-4a54-8dd3-b9f9b753169c--</span>
</code></pre></div></td></tr></table></div> <h3 id=audit-log>Audit Log<a class=headerlink href=#audit-log title="Permanent link"> ¶</a></h3> <p>Primary systems shall store syslog messages to the audit record repository of the community using <abbr title="Transport Layer Security">TLS</abbr> transport protocol. The audit message uses XML formatting as specified in <a href=https://tools.ietf.org/html/rfc3881 rel="external nofollow noopener" target=_blank>RFC 3881</a> with restrictions specified in the <a href="https://ehealthsuisse.ihe-europe.net/gss/audit-messages/view.seam?id=700" rel="external nofollow noopener" target=_blank>IHE ITI TF</a> and the <a href=https://www.fedlex.admin.ch/eli/oc/2023/221/de/annexes rel="external nofollow noopener" target=_blank>Extension 1 to Annex5</a> in the ordinances of the Swiss electronic patient record (see Section 1.5 "Requirements on <abbr title="Audit Trail and Node Authentication">ATNA</abbr>"). </p> <p>The following snippet shows a example audit message to be written by the primary system:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>iti-41-log.xml</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1> 1</a></span>
<span class=normal><a href=#__codelineno-8-2> 2</a></span>
<span class=normal><a href=#__codelineno-8-3> 3</a></span>
<span class=normal><a href=#__codelineno-8-4> 4</a></span>
<span class=normal><a href=#__codelineno-8-5> 5</a></span>
<span class=normal><a href=#__codelineno-8-6> 6</a></span>
<span class=normal><a href=#__codelineno-8-7> 7</a></span>
<span class=normal><a href=#__codelineno-8-8> 8</a></span>
<span class=normal><a href=#__codelineno-8-9> 9</a></span>
<span class=normal><a href=#__codelineno-8-10>10</a></span>
<span class=normal><a href=#__codelineno-8-11>11</a></span>
<span class=normal><a href=#__codelineno-8-12>12</a></span>
<span class=normal><a href=#__codelineno-8-13>13</a></span>
<span class=normal><a href=#__codelineno-8-14>14</a></span>
<span class=normal><a href=#__codelineno-8-15>15</a></span>
<span class=normal><a href=#__codelineno-8-16>16</a></span>
<span class=normal><a href=#__codelineno-8-17>17</a></span>
<span class=normal><a href=#__codelineno-8-18>18</a></span>
<span class=normal><a href=#__codelineno-8-19>19</a></span>
<span class=normal><a href=#__codelineno-8-20>20</a></span>
<span class=normal><a href=#__codelineno-8-21>21</a></span>
<span class=normal><a href=#__codelineno-8-22>22</a></span>
<span class=normal><a href=#__codelineno-8-23>23</a></span>
<span class=normal><a href=#__codelineno-8-24>24</a></span>
<span class=normal><a href=#__codelineno-8-25>25</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=cp>&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a><span class=nt>&lt;AuditMessage&gt;</span>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=w> </span><span class=nt>&lt;EventIdentification</span><span class=w> </span><span class=na>EventActionCode=</span><span class=s>&quot;R&quot;</span><span class=w> </span><span class=na>EventDateTime=</span><span class=s>&quot;2020-11-17T18:39:39+01:00&quot;</span><span class=w> </span><span class=na>EventOutcomeIndicator=</span><span class=s>&quot;0&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-8-4 name=__codelineno-8-4></a><span class=w>  </span><span class=nt>&lt;EventID</span><span class=w> </span><span class=na>csd-code=</span><span class=s>&quot;110106&quot;</span><span class=w> </span><span class=na>originalText=</span><span class=s>&quot;Export&quot;</span><span class=w> </span><span class=na>codeSystemName=</span><span class=s>&quot;DCM&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=w>  </span><span class=nt>&lt;EventTypeCode</span><span class=w> </span><span class=na>csd-code=</span><span class=s>&quot;ITI-41&quot;</span><span class=w> </span><span class=na>originalText=</span><span class=s>&quot;Provide and Register Document Set-b&quot;</span><span class=w> </span><span class=na>codeSystemName=</span><span class=s>&quot;IHE Transactions&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-8-6 name=__codelineno-8-6></a><span class=w> </span><span class=nt>&lt;/EventIdentification&gt;</span>
<a id=__codelineno-8-7 name=__codelineno-8-7></a><span class=w> </span><span class=nt>&lt;ActiveParticipant</span><span class=w> </span><span class=na>UserID=</span><span class=s>&quot;https://repositoryService.com&quot;</span><span class=w> </span><span class=na>AlternativeUserID=</span><span class=s>&quot;1&quot;</span><span class=w> </span><span class=na>UserIsRequestor=</span><span class=s>&quot;false&quot;</span><span class=w> </span><span class=na>NetworkAccessPointID=</span><span class=s>&quot;172.18.0.49&quot;</span><span class=w> </span><span class=na>NetworkAccessPointTypeCode=</span><span class=s>&quot;2&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-8-8 name=__codelineno-8-8></a><span class=w>  </span><span class=nt>&lt;RoleIDCode</span><span class=w> </span><span class=na>csd-code=</span><span class=s>&quot;110153&quot;</span><span class=w> </span><span class=na>codeSystemName=</span><span class=s>&quot;DCM&quot;</span><span class=w> </span><span class=na>originalText=</span><span class=s>&quot;Source Role ID&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-8-9 name=__codelineno-8-9></a><span class=w> </span><span class=nt>&lt;/ActiveParticipant&gt;</span>
<a id=__codelineno-8-10 name=__codelineno-8-10></a><span class=w> </span><span class=nt>&lt;ActiveParticipant</span><span class=w> </span><span class=na>UserID=</span><span class=s>&quot;pma@gnt.com&quot;</span><span class=w> </span><span class=na>UserName=</span><span class=s>&quot;JD&lt;pma@gnt.com&gt;&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-8-11 name=__codelineno-8-11></a><span class=w>  </span><span class=nt>&lt;/ActiveParticipant&gt;</span>
<a id=__codelineno-8-12 name=__codelineno-8-12></a><span class=w> </span><span class=nt>&lt;ActiveParticipant</span><span class=w> </span><span class=na>UserID=</span><span class=s>&quot;pma@gnt.com&quot;</span><span class=w> </span><span class=na>UserName=</span><span class=s>&quot;John Doe&quot;</span><span class=w> </span><span class=na>UserIsRequestor=</span><span class=s>&quot;true&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-8-13 name=__codelineno-8-13></a><span class=w>  </span><span class=nt>&lt;RoleIDCode</span><span class=w> </span><span class=na>csd-code=</span><span class=s>&quot;HCP&quot;</span><span class=w> </span><span class=na>codeSystemName=</span><span class=s>&quot;2.16.756.5.30.1.127.3.10.6&quot;</span><span class=w> </span><span class=na>originalText=</span><span class=s>&quot;Healthcare professional&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-8-14 name=__codelineno-8-14></a><span class=w> </span><span class=nt>&lt;/ActiveParticipant&gt;</span>
<a id=__codelineno-8-15 name=__codelineno-8-15></a><span class=w> </span><span class=nt>&lt;ActiveParticipant</span><span class=w> </span><span class=na>UserID=</span><span class=s>&quot;https://primarySystem.com&quot;</span><span class=w> </span><span class=na>AlternativeUserID=</span><span class=s>&quot;UNKNOWN&quot;</span><span class=w> </span><span class=na>UserIsRequestor=</span><span class=s>&quot;true&quot;</span><span class=w> </span><span class=na>NetworkAccessPointID=</span><span class=s>&quot;hcohcdemo01-app06-icwpxs01.net.swisscom-health.it&quot;</span><span class=w> </span><span class=na>NetworkAccessPointTypeCode=</span><span class=s>&quot;1&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-8-16 name=__codelineno-8-16></a><span class=w>  </span><span class=nt>&lt;RoleIDCode</span><span class=w> </span><span class=na>csd-code=</span><span class=s>&quot;110152&quot;</span><span class=w> </span><span class=na>codeSystemName=</span><span class=s>&quot;DCM&quot;</span><span class=w> </span><span class=na>originalText=</span><span class=s>&quot;Destination Role ID&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-8-17 name=__codelineno-8-17></a><span class=w> </span><span class=nt>&lt;/ActiveParticipant&gt;</span>
<a id=__codelineno-8-18 name=__codelineno-8-18></a><span class=w> </span><span class=nt>&lt;AuditSourceIdentification</span><span class=w> </span><span class=na>code=</span><span class=s>&quot;1&quot;</span><span class=w> </span><span class=na>AuditSourceID=</span><span class=s>&quot;connectathon&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-8-19 name=__codelineno-8-19></a><span class=w> </span><span class=nt>&lt;ParticipantObjectIdentification</span><span class=w> </span><span class=na>ParticipantObjectID=</span><span class=s>&quot;752343^^^&amp;amp;2.16.840.1.113883.3.37.4.1.1.2.1.1&amp;amp;ISO&quot;</span><span class=w> </span><span class=na>ParticipantObjectTypeCode=</span><span class=s>&quot;1&quot;</span><span class=w> </span><span class=na>ParticipantObjectTypeCodeRole=</span><span class=s>&quot;1&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-8-20 name=__codelineno-8-20></a><span class=w>  </span><span class=nt>&lt;ParticipantObjectIDTypeCode</span><span class=w> </span><span class=na>csd-code=</span><span class=s>&quot;2&quot;</span><span class=w> </span><span class=na>originalText=</span><span class=s>&quot;Patient Number&quot;</span><span class=w> </span><span class=na>codeSystemName=</span><span class=s>&quot;RFC-3881&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-8-21 name=__codelineno-8-21></a><span class=w> </span><span class=nt>&lt;/ParticipantObjectIdentification&gt;</span>
<a id=__codelineno-8-22 name=__codelineno-8-22></a><span class=w> </span><span class=nt>&lt;ParticipantObjectIdentification</span><span class=w> </span><span class=na>ParticipantObjectID=</span><span class=s>&quot;urn:uuid:6b948daf-ab4a-4d51-a1a4-e9f4b2e05ff7&quot;</span><span class=w> </span><span class=na>ParticipantObjectTypeCode=</span><span class=s>&quot;2&quot;</span><span class=w> </span><span class=na>ParticipantObjectTypeCodeRole=</span><span class=s>&quot;20&quot;</span><span class=nt>&gt;</span>
<a id=__codelineno-8-23 name=__codelineno-8-23></a><span class=w>  </span><span class=nt>&lt;ParticipantObjectIDTypeCode</span><span class=w> </span><span class=na>csd-code=</span><span class=s>&quot;urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd&quot;</span><span class=w> </span><span class=na>originalText=</span><span class=s>&quot;submission set classificationNode&quot;</span><span class=w> </span><span class=na>codeSystemName=</span><span class=s>&quot;IHE XDS Metadata&quot;</span><span class=nt>/&gt;</span>
<a id=__codelineno-8-24 name=__codelineno-8-24></a><span class=w> </span><span class=nt>&lt;/ParticipantObjectIdentification&gt;</span>
<a id=__codelineno-8-25 name=__codelineno-8-25></a><span class=nt>&lt;/AuditMessage&gt;</span>
</code></pre></div></td></tr></table></div> <p>The message is made of the following blocks:</p> <ul> <li><em>EventIdentification</em>: Element with event related information including the timestamp.</li> <li><em>ActiveParticipant</em>: Information related to the community repository which is the source of the documents.</li> <li><em>ActiveParticipant</em>: Information on the user as required by the IHE <abbr title="X-User Assertion">XUA</abbr> profile.</li> <li><em>ActiveParticipant</em>: Element with information on the authenticated user initiating the request.</li> <li><em>ActiveParticipant</em>: Element with information on the primary system performing which is the destination of the documents.</li> <li><em>ParticipantObjectIdentification</em>: Element conveying the master patient ID (XAD-PID) in CX format (see <a href=../PIXFeed/ >PIX Feed</a>). </li> <li><em>ParticipantObjectIdentification</em>: Element with request message related information. </li> </ul> <p><em>TODO</em> Update with gazelle example</p> <h3 id=security-requirements>Security Requirements<a class=headerlink href=#security-requirements title="Permanent link"> ¶</a></h3> <p>To ensure privacy the transaction must be secured using https with mutual authentication, with X.509 certificates (extended validation required) and client and server side certificate validation.</p> <p>To enable authorization, the transaction must convey the <abbr title="X-User Assertion">XUA</abbr> Assertion for authorization in the security header of the SOAP envelope. See <a href=../ProvideXAssertion/ >Provide X-User Assertion</a> for the implementation details.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <ul> <li>Some test environments dropped the mutual authentication or <abbr title="Transport Layer Security">TLS</abbr> for testing purposes. Please contact your test system provider on the details.</li> <li>Some test environments may also drop authorization for testing purposes. Please contact your test system provider on the details.</li> </ul> </div> <h2 id=test-opportunity>Test Opportunity<a class=headerlink href=#test-opportunity title="Permanent link"> ¶</a></h2> <p>The transaction can be tested with the test suite of the <a href=../gazelle/ ><abbr title="Electronic Patient Record">EPR</abbr> reference environment</a>, test systems of the <abbr title="Electronic Patient Record">EPR</abbr> communities or the <a href=../playground/ ><abbr title="Electronic Patient Record">EPR</abbr> Playground</a>.</p> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2023-12-03T21:24:29+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-12-03</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=https://www.e-health-suisse.ch/ >eHealth Suisse</a> | <a href=https://github.com/ehealthsuisse/EPD-by-example/blob/main/LICENSE><em>Creative Commons Zero v1.0 Universal</em></a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["content.code.copy", "search.suggest", "search.highlight", "navigation.sections", "navigation.expand", "toc.follow"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.cd18aaf1.min.js></script> <script src=../js/timeago.min.js></script> <script src=../js/timeago_mkdocs_material.js></script> </body> </html>